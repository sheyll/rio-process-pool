<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>RIO.ProcessPool</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">rio-process-pool-1.0.0: A library for process pools coupled with asynchronous message queues</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">RIO.ProcessPool</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Launch- and Dispatch messages to processes.</p><p>A pool has an <code>Input</code> for <code><a href="RIO-ProcessPool.html#t:Multiplexed" title="RIO.ProcessPool">Multiplexed</a></code> messages,
 and dispatches incoming messges to concurrent
 processes using user defined <code><code>MessageBox</code>es</code>.</p><p>The pool starts and stops the processes and
 creates the message boxes.</p><p>The user supplied <code><a href="RIO-ProcessPool.html#t:PoolWorkerCallback" title="RIO.ProcessPool">PoolWorkerCallback</a></code>
 usually runs a loop that <code><code>receive</code>s</code> messages
 from the <code>MessageBox</code> created by the pool for that worker.</p><p>When a worker process dies, e.g. because the
 <code><a href="RIO-ProcessPool.html#t:PoolWorkerCallback" title="RIO.ProcessPool">PoolWorkerCallback</a></code> returns, the pool
 process will also <code>cancel</code> the process (just to make sure...)
 and cleanup the internal <code>Broker</code>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:ResourceCleaner">ResourceCleaner</a> k a m = k -&gt; a -&gt; RIO m ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:ResourceCreator">ResourceCreator</a> k w a m = k -&gt; Maybe w -&gt; RIO m a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Multiplexed">Multiplexed</a> k w<ul class="subs"><li>= <a href="#v:Initialize">Initialize</a> k !(Maybe w)</li><li>| <a href="#v:Dispatch">Dispatch</a> k w</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ResourceUpdate">ResourceUpdate</a> a<ul class="subs"><li>= <a href="#v:KeepResource">KeepResource</a></li><li>| <a href="#v:UpdateResource">UpdateResource</a> a</li><li>| <a href="#v:RemoveResource">RemoveResource</a> !(Maybe a)</li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:MessageHandler">MessageHandler</a> k w a m = k -&gt; w -&gt; a -&gt; RIO m (<a href="RIO-ProcessPool.html#t:ResourceUpdate" title="RIO.ProcessPool">ResourceUpdate</a> a)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Demultiplexer">Demultiplexer</a> w' k w = w' -&gt; <a href="RIO-ProcessPool.html#t:Multiplexed" title="RIO.ProcessPool">Multiplexed</a> k w</li><li class="src short"><span class="keyword">data</span> <a href="#t:BrokerConfig">BrokerConfig</a> k w' w a m = <a href="#v:MkBrokerConfig">MkBrokerConfig</a> {<ul class="subs"><li><a href="#v:demultiplexer">demultiplexer</a> :: !(<a href="RIO-ProcessPool.html#t:Demultiplexer" title="RIO.ProcessPool">Demultiplexer</a> w' k w)</li><li><a href="#v:messageDispatcher">messageDispatcher</a> :: !(<a href="RIO-ProcessPool.html#t:MessageHandler" title="RIO.ProcessPool">MessageHandler</a> k w a m)</li><li><a href="#v:resourceCreator">resourceCreator</a> :: !(<a href="RIO-ProcessPool.html#t:ResourceCreator" title="RIO.ProcessPool">ResourceCreator</a> k w a m)</li><li><a href="#v:resourceCleaner">resourceCleaner</a> :: !(<a href="RIO-ProcessPool.html#t:ResourceCleaner" title="RIO.ProcessPool">ResourceCleaner</a> k a m)</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:BrokerResult">BrokerResult</a> = <a href="#v:MkBrokerResult">MkBrokerResult</a></li><li class="src short"><a href="#v:spawnBroker">spawnBroker</a> :: <span class="keyword">forall</span> brokerBoxArg k w' w a m. (HasLogFunc m, Ord k, Display k, IsMessageBoxArg brokerBoxArg) =&gt; brokerBoxArg -&gt; <a href="RIO-ProcessPool.html#t:BrokerConfig" title="RIO.ProcessPool">BrokerConfig</a> k w' w a m -&gt; RIO m (Either SomeException (Input (MessageBox brokerBoxArg) w', Async <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a>))</li><li class="src short"><span class="keyword">data</span> <a href="#t:Pool">Pool</a> poolBox k w = <a href="#v:MkPool">MkPool</a> {<ul class="subs"><li><a href="#v:poolInput">poolInput</a> :: !(Input (MessageBox poolBox) (<a href="RIO-ProcessPool.html#t:Multiplexed" title="RIO.ProcessPool">Multiplexed</a> k (Maybe w)))</li><li><a href="#v:poolAsync">poolAsync</a> :: !(Async <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a>)</li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:PoolWorkerCallback">PoolWorkerCallback</a> workerBox w k m = <a href="#v:MkPoolWorkerCallback">MkPoolWorkerCallback</a> {<ul class="subs"><li><a href="#v:runPoolWorkerCallback">runPoolWorkerCallback</a> :: k -&gt; MessageBox workerBox w -&gt; RIO m ()</li></ul>}</li><li class="src short"><a href="#v:spawnPool">spawnPool</a> :: <span class="keyword">forall</span> k w poolBox workerBox m. (IsMessageBoxArg poolBox, IsMessageBoxArg workerBox, Ord k, Display k, HasLogFunc m) =&gt; poolBox -&gt; workerBox -&gt; <a href="RIO-ProcessPool.html#t:PoolWorkerCallback" title="RIO.ProcessPool">PoolWorkerCallback</a> workerBox w k m -&gt; RIO m (Either SomeException (<a href="RIO-ProcessPool.html#t:Pool" title="RIO.ProcessPool">Pool</a> poolBox k w))</li><li class="src short"><a href="#v:removePoolWorkerMessage">removePoolWorkerMessage</a> :: k -&gt; <a href="RIO-ProcessPool.html#t:Multiplexed" title="RIO.ProcessPool">Multiplexed</a> k (Maybe w)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="doc"><p>A process that receives messages and dispatches them to 
   a callback. 
   Each message must contain a <em>key</em> that identifies a resource.
   That resource is created and cleaned by user supplied 
   callback functions.    </p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ResourceCleaner" class="def">ResourceCleaner</a> k a m = k -&gt; a -&gt; RIO m () <a href="#t:ResourceCleaner" class="selflink">#</a></p><div class="doc"><p>User supplied callback called _with exceptions masked_
 when the <code><a href="RIO-ProcessPool.html#t:MessageHandler" title="RIO.ProcessPool">MessageHandler</a></code> returns <code><a href="RIO-ProcessPool.html#v:RemoveResource" title="RIO.ProcessPool">RemoveResource</a></code>
 (Sync-) Exceptions thrown from this function are caught,
 and do not prevent the removal of the resource, also the
 broker continues.</p><ul><li><code>k</code> is the <em>key</em> for the resource associated to an incoming
   message</li><li><code>a</code> specifies the resource type.</li><li><code>m</code> is the monad of the returned action.</li></ul></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ResourceCreator" class="def">ResourceCreator</a> k w a m = k -&gt; Maybe w -&gt; RIO m a <a href="#t:ResourceCreator" class="selflink">#</a></p><div class="doc"><p>User supplied callback to create and initialize a resource.
  (Sync-) Exceptions thrown from this function are caught,
  and the broker continues.</p><ul><li><code>k</code> is the <em>key</em> for the resource associated to an incoming
   message</li><li><code>w</code> is the type of the demultiplexed messages.</li><li><code>a</code> specifies the resource type.</li><li><code>m</code> is the monad of the returned action.</li></ul></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Multiplexed" class="def">Multiplexed</a> k w <a href="#t:Multiplexed" class="selflink">#</a></p><div class="doc"><p>The action that the broker has to take for in incoming message.</p><ul><li><code>k</code> is the <em>key</em> for the resource associated to an incoming
   message</li><li><code>w</code> is the type of the demultiplexed messages.</li></ul></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Initialize" class="def">Initialize</a> k !(Maybe w)</td><td class="doc"><p>The message is an initialization message, that requires the
   creation of a new resouce for the given key.
   When the resource is created, then <em>maybe</em> additionally
   a message will also be dispatched.</p></td></tr><tr><td class="src"><a id="v:Dispatch" class="def">Dispatch</a> k w</td><td class="doc"><p>Dispatch a message using an existing resource.
 Silently ignore if no resource for the key exists.</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ResourceUpdate" class="def">ResourceUpdate</a> a <a href="#t:ResourceUpdate" class="selflink">#</a></p><div class="doc"><p>This value indicates in what state a worker is in after the
  <code><a href="RIO-ProcessPool.html#t:MessageHandler" title="RIO.ProcessPool">MessageHandler</a></code> action was executed.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:KeepResource" class="def">KeepResource</a></td><td class="doc"><p>The resources is still required.</p></td></tr><tr><td class="src"><a id="v:UpdateResource" class="def">UpdateResource</a> a</td><td class="doc"><p>The resource is still required but must be updated.</p></td></tr><tr><td class="src"><a id="v:RemoveResource" class="def">RemoveResource</a> !(Maybe a)</td><td class="doc"><p>The resource is obsolete and can
   be removed from the broker.
   The broker will call <code><a href="RIO-ProcessPool.html#t:ResourceCleaner" title="RIO.ProcessPool">ResourceCleaner</a></code> either
   on the current, or an updated resource value.</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MessageHandler" class="def">MessageHandler</a> k w a m = k -&gt; w -&gt; a -&gt; RIO m (<a href="RIO-ProcessPool.html#t:ResourceUpdate" title="RIO.ProcessPool">ResourceUpdate</a> a) <a href="#t:MessageHandler" class="selflink">#</a></p><div class="doc"><p>User supplied callback to use the <code><a href="RIO-ProcessPool.html#t:Multiplexed" title="RIO.ProcessPool">Multiplexed</a></code> message and
  the associated resource.
  (Sync-) Exceptions thrown from this function are caught and lead
  to immediate cleanup of the resource but the broker continues.</p><ul><li>Type <code>k</code> is the <em>key</em> for the resource associated to an incoming
   message</li><li>Type <code>w</code> is the type of incoming, demultiplexed, messages.</li><li>Type <code>a</code> specifies the resource type.</li><li>Type <code>m</code> is the base monad</li></ul></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Demultiplexer" class="def">Demultiplexer</a> w' k w = w' -&gt; <a href="RIO-ProcessPool.html#t:Multiplexed" title="RIO.ProcessPool">Multiplexed</a> k w <a href="#t:Demultiplexer" class="selflink">#</a></p><div class="doc"><p>User supplied callback to extract the key and the <code><a href="RIO-ProcessPool.html#t:Multiplexed" title="RIO.ProcessPool">Multiplexed</a></code>
  from a message.
  (Sync-) Exceptions thrown from this function are caught and lead
  to dropping of the incoming message, while the broker continues.</p><ul><li><code>k</code> is the <em>key</em> for the resource associated to an incoming
   message</li><li><code>w'</code> is the type of incoming messages.</li><li><code>w</code> is the type of the demultiplexed messages.</li></ul></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BrokerConfig" class="def">BrokerConfig</a> k w' w a m <a href="#t:BrokerConfig" class="selflink">#</a></p><div class="doc"><p>The broker configuration, used by <code><a href="RIO-ProcessPool.html#v:spawnBroker" title="RIO.ProcessPool">spawnBroker</a></code>.</p><ul><li><code>k</code> is the <em>key</em> for the resource associated to an incoming
   message</li><li><code>w'</code> is the type of incoming messages.</li><li><code>w</code> is the type of the demultiplexed messages.</li><li><code>a</code> specifies the resource type.</li><li><code>m</code> is the base monad</li></ul></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MkBrokerConfig" class="def">MkBrokerConfig</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:demultiplexer" class="def">demultiplexer</a> :: !(<a href="RIO-ProcessPool.html#t:Demultiplexer" title="RIO.ProcessPool">Demultiplexer</a> w' k w)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:messageDispatcher" class="def">messageDispatcher</a> :: !(<a href="RIO-ProcessPool.html#t:MessageHandler" title="RIO.ProcessPool">MessageHandler</a> k w a m)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:resourceCreator" class="def">resourceCreator</a> :: !(<a href="RIO-ProcessPool.html#t:ResourceCreator" title="RIO.ProcessPool">ResourceCreator</a> k w a m)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:resourceCleaner" class="def">resourceCleaner</a> :: !(<a href="RIO-ProcessPool.html#t:ResourceCleaner" title="RIO.ProcessPool">ResourceCleaner</a> k a m)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BrokerResult" class="def">BrokerResult</a> <a href="#t:BrokerResult" class="selflink">#</a></p><div class="doc"><p>This is just what the <code>Async</code> returned from
 <code><a href="RIO-ProcessPool.html#v:spawnBroker" title="RIO.ProcessPool">spawnBroker</a></code> returns, it's current purpose is to
 make code easier to read.</p><p>Instead of some <code>Async ()</code> that could be anything,
 there is <code>Async BrokerResult</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MkBrokerResult" class="def">MkBrokerResult</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:BrokerResult">Instances</h4><details id="i:BrokerResult" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BrokerResult:Eq:1"></span> Eq <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a></span> <a href="#t:BrokerResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BrokerResult:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="RIO-ProcessPool-Broker.html">RIO.ProcessPool.Broker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a> -&gt; <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a> -&gt; <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BrokerResult:Show:2"></span> Show <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a></span> <a href="#t:BrokerResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BrokerResult:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="RIO-ProcessPool-Broker.html">RIO.ProcessPool.Broker</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a> -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:spawnBroker" class="def">spawnBroker</a> :: <span class="keyword">forall</span> brokerBoxArg k w' w a m. (HasLogFunc m, Ord k, Display k, IsMessageBoxArg brokerBoxArg) =&gt; brokerBoxArg -&gt; <a href="RIO-ProcessPool.html#t:BrokerConfig" title="RIO.ProcessPool">BrokerConfig</a> k w' w a m -&gt; RIO m (Either SomeException (Input (MessageBox brokerBoxArg) w', Async <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a>)) <a href="#v:spawnBroker" class="selflink">#</a></p><div class="doc"><p>Spawn a broker with a new <code>MessageBox</code>,
  and return its message <code>Input</code> channel as well as
 the <code>Async</code> handle of the spawned process, needed to
 stop the broker process.</p><ul><li><code>k</code> is the <em>key</em> for the resource associated to an incoming
   message</li><li><code>w'</code> is the type of incoming messages.</li><li><code>w</code> is the type of the demultiplexed messages.</li><li><code>a</code> specifies the resource type.</li><li><code>m</code> is the base monad</li></ul></div></div><div class="doc"><p>A process that receives messages and dispatches them to 
   other processes.
   Building directly on <a href="RIO-ProcessPool-Broker.html">RIO.ProcessPool.Broker</a>, it provides 
   a central message box <code>Input</code>, from which messages are 
   are delivered to the corresponding message box <code>Input</code>s.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Pool" class="def">Pool</a> poolBox k w <a href="#t:Pool" class="selflink">#</a></p><div class="doc"><p>A record containing the message box <code>Input</code> of the
 <code>Broker</code> and the <code>Async</code> value required to <code>cancel</code>
 the pools broker process.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MkPool" class="def">MkPool</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:poolInput" class="def">poolInput</a> :: !(Input (MessageBox poolBox) (<a href="RIO-ProcessPool.html#t:Multiplexed" title="RIO.ProcessPool">Multiplexed</a> k (Maybe w)))</dfn><div class="doc"><p>Message sent to this input are dispatched to workers.
 If the message is an <code>Initialize</code> message, a new <code>async</code>
 process will be started.
 If the message value is <code>Nothing</code>, the processes is killed.</p></div></li><li><dfn class="src"><a id="v:poolAsync" class="def">poolAsync</a> :: !(Async <a href="RIO-ProcessPool.html#t:BrokerResult" title="RIO.ProcessPool">BrokerResult</a>)</dfn><div class="doc"><p>The async of the internal <code>Broker</code>.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:PoolWorkerCallback" class="def">PoolWorkerCallback</a> workerBox w k m <a href="#t:PoolWorkerCallback" class="selflink">#</a></p><div class="doc"><p>The function that processes a
 <code>MessageBox</code> of a worker for a specific <em>key</em>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MkPoolWorkerCallback" class="def">MkPoolWorkerCallback</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:runPoolWorkerCallback" class="def">runPoolWorkerCallback</a> :: k -&gt; MessageBox workerBox w -&gt; RIO m ()</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:spawnPool" class="def">spawnPool</a> :: <span class="keyword">forall</span> k w poolBox workerBox m. (IsMessageBoxArg poolBox, IsMessageBoxArg workerBox, Ord k, Display k, HasLogFunc m) =&gt; poolBox -&gt; workerBox -&gt; <a href="RIO-ProcessPool.html#t:PoolWorkerCallback" title="RIO.ProcessPool">PoolWorkerCallback</a> workerBox w k m -&gt; RIO m (Either SomeException (<a href="RIO-ProcessPool.html#t:Pool" title="RIO.ProcessPool">Pool</a> poolBox k w)) <a href="#v:spawnPool" class="selflink">#</a></p><div class="doc"><p>Start a <code><a href="RIO-ProcessPool.html#t:Pool" title="RIO.ProcessPool">Pool</a></code>.</p><p>Start a process that receives messages sent to the
 <code><a href="RIO-ProcessPool.html#v:poolInput" title="RIO.ProcessPool">poolInput</a></code> and dispatches them to the <code>Input</code> of
 <strong>pool member</strong> processes. If necessary the
 pool worker processes are started.</p><p>Each pool worker process is started using <code>async</code> and
 executes the <code><a href="RIO-ProcessPool.html#t:PoolWorkerCallback" title="RIO.ProcessPool">PoolWorkerCallback</a></code>.</p><p>When the callback returns, the process will exit.</p><p>Internally the pool uses the <code>async</code> function to wrap
 the callback.</p><p>When a <code>Multiplixed</code> <code><a href="RIO-ProcessPool.html#v:Dispatch" title="RIO.ProcessPool">Dispatch</a></code> message is received with
 a <code>Nothing</code> then the worker is <code><code>cancel</code>led</code> and the
 worker is removed from the map.</p><p>Such a message is automatically sent after the <code><a href="RIO-ProcessPool.html#t:PoolWorkerCallback" title="RIO.ProcessPool">PoolWorkerCallback</a></code>
 has returned, even when an exception was thrown. See
 <code>finally</code>.</p></div></div><div class="top"><p class="src"><a id="v:removePoolWorkerMessage" class="def">removePoolWorkerMessage</a> :: k -&gt; <a href="RIO-ProcessPool.html#t:Multiplexed" title="RIO.ProcessPool">Multiplexed</a> k (Maybe w) <a href="#v:removePoolWorkerMessage" class="selflink">#</a></p><div class="doc"><p>This message will <code>cancel</code> the worker
 with the given key.
 If the <code><a href="RIO-ProcessPool.html#t:PoolWorkerCallback" title="RIO.ProcessPool">PoolWorkerCallback</a></code> wants to do cleanup
 it should use <code>finally</code> or <code>onException</code>.</p></div></div><div class="doc"><p>Re-export.</p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>